$(function(){"use strict";function n(n){o.emit("formSubmission",n),i()}function i(){s.html(d()),console.log("instance is initializing")}function t(n){s.html(f(n)),$("#stopServer").on("click",function(){var n=$(this).attr("data-id");o.emit("stopInstance",{instanceId:n})}),console.log("instance is running")}function e(){s.html(g()),$("#restart").on("click",function(){window.location.reload()}),console.log("instance has been terminated for good.....")}var o=io.connect(window.location.hostname);o.on("news",function(n){console.log(n)}),o.on("error",function(n){console.log("Error message: ",n.message)}),o.on("state",function(n){console.log("State data:",n),"running"===n.state?("ok"===n.availibility&&t(n),"initializing"===n.availibility&&console.log("still initializing...")):"terminated"===n.state?e():"pending"===n.state});var a=null,l=null,s=$("#container"),r=$("#initialForm").html(),c=$("#serverInitializing").html(),m=$("#serverReady").html(),u=$("#serverStopped").html(),h=Handlebars.compile(r),d=Handlebars.compile(c),f=Handlebars.compile(m),g=Handlebars.compile(u);s.html(h()),a=$("#createAMI"),l=$("form"),a.on("click",function(i){i.preventDefault();var t=l.serializeObject();n(t)}),$.fn.serializeObject=function(){var n={},i=this.serializeArray();return $.each(i,function(){void 0!==n[this.name]?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(this.value||"")):n[this.name]=this.value||""}),n}});