$(function(){"use strict";function n(n){a.emit("formSubmission",n),i()}function i(){s.html(d()),console.log("instance is initializing")}function t(n){s.html(f(n)),$("#stopServer").on("click",function(){var n=$(this).attr("data-id");a.emit("stopInstance",{instanceId:n})}),console.log("instance is running")}function e(){s.html(v()),$("#restart").on("click",function(){window.location.reload()}),console.log("instance has been terminated for good.....")}var a=io.connect(window.location.hostname);a.on("news",function(n){console.log(n)}),a.on("state",function(n){console.log("State data:",n),"running"===n.state?("ok"===n.availibility&&t(n),"initializing"===n.availibility&&console.log("still initializing...")):"terminated"===n.state?e():"pending"===n.state});var o=null,l=null,s=$("#container"),c=$("#initialForm").html(),r=$("#serverInitializing").html(),m=$("#serverReady").html(),u=$("#serverStopped").html(),h=Handlebars.compile(c),d=Handlebars.compile(r),f=Handlebars.compile(m),v=Handlebars.compile(u);s.html(h()),o=$("#createAMI"),l=$("form"),o.on("click",function(i){i.preventDefault();var t=l.serializeObject();n(t)}),$.fn.serializeObject=function(){var n={},i=this.serializeArray();return $.each(i,function(){void 0!==n[this.name]?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(this.value||"")):n[this.name]=this.value||""}),n}});